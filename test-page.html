<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ¡ãƒ«ã‚«ãƒªé¢¨ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ - å‡ºå“å•†å“ä¸€è¦§</title>
    <style>
        body {
            font-family: 'Hiragino Sans', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ ProN W3', 'Hiragino Kaku Gothic ProN', 'ãƒ¡ã‚¤ãƒªã‚ª', Meiryo, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .header {
            background: #ff6b6b;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .item-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .item-box {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .item-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }
        
        .item-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 14px;
        }
        
        .item-info {
            padding: 15px;
        }
        
        .item-name {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .item-price {
            font-size: 18px;
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 5px;
        }
        
        .item-status {
            font-size: 12px;
            color: #666;
            background: #f0f0f0;
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
        }
        
        .controls {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .controls button {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .controls button:hover {
            background: #ff5252;
        }
        
        .debug-info {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“¦ ãƒ¡ãƒ«ã‚«ãƒªé¢¨ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ - å‡ºå“å•†å“ä¸€è¦§</h1>
        <p>Chromeæ‹¡å¼µæ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆç”¨ãƒšãƒ¼ã‚¸ã§ã™</p>
    </div>
    
    <div class="controls">
        <h3>ğŸ”§ ãƒ†ã‚¹ãƒˆç”¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«</h3>
        <button onclick="simulateProductScan()">å•†å“ã‚¹ã‚­ãƒ£ãƒ³ã‚’ãƒ†ã‚¹ãƒˆ</button>
        <button onclick="addRandomProduct()">ãƒ©ãƒ³ãƒ€ãƒ å•†å“ã‚’è¿½åŠ </button>
        <button onclick="clearProducts()">å•†å“ã‚’ã‚¯ãƒªã‚¢</button>
        <button onclick="showDebugInfo()">ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¡¨ç¤º</button>
    </div>
    
    <div class="item-grid" id="itemGrid">
        <!-- å•†å“ã‚¢ã‚¤ãƒ†ãƒ ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
    </div>
    
    <div class="debug-info" id="debugInfo" style="display: none;">
        <h4>ğŸ› ãƒ‡ãƒãƒƒã‚°æƒ…å ±</h4>
        <div id="debugContent"></div>
    </div>

    <script>
        // ã‚µãƒ³ãƒ—ãƒ«å•†å“ãƒ‡ãƒ¼ã‚¿
        const sampleProducts = [
            { name: 'iPhone 13 Pro 128GB ã‚·ãƒ«ãƒãƒ¼', price: 85000, status: 'å‡ºå“ä¸­' },
            { name: 'Nintendo Switch æœ¬ä½“ ãƒã‚ªãƒ³ãƒ–ãƒ«ãƒ¼/ãƒã‚ªãƒ³ãƒ¬ãƒƒãƒ‰', price: 28000, status: 'å‡ºå“ä¸­' },
            { name: 'AirPods Pro ç¬¬2ä¸–ä»£ MQD83J/A', price: 25000, status: 'å‡ºå“ä¸­' },
            { name: 'ãƒ«ã‚¤ãƒ´ã‚£ãƒˆãƒ³ ãƒ¢ãƒã‚°ãƒ©ãƒ  ãƒãƒ³ãƒ‰ãƒãƒƒã‚°', price: 45000, status: 'å‡ºå“ä¸­' },
            { name: 'ãƒŠã‚¤ã‚­ ã‚¨ã‚¢ã‚¸ãƒ§ãƒ¼ãƒ€ãƒ³ 1 27cm', price: 18000, status: 'å‡ºå“ä¸­' },
            { name: 'MacBook Air M2 13ã‚¤ãƒ³ãƒ 256GB', price: 120000, status: 'å‡ºå“ä¸­' },
            { name: 'ãƒ—ãƒ¬ã‚¤ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³5 æœ¬ä½“', price: 55000, status: 'å‡ºå“ä¸­' },
            { name: 'ãƒ­ãƒ¬ãƒƒã‚¯ã‚¹ ã‚µãƒ–ãƒãƒªãƒ¼ãƒŠï¼ˆãƒ¬ãƒ—ãƒªã‚«ï¼‰', price: 8000, status: 'å‡ºå“ä¸­' }
        ];
        
        let currentProducts = [];
        
        // åˆæœŸå•†å“ã‚’è¡¨ç¤º
        function initializeProducts() {
            currentProducts = [...sampleProducts];
            renderProducts();
        }
        
        // å•†å“ã‚’ç”»é¢ã«æç”»
        function renderProducts() {
            const grid = document.getElementById('itemGrid');
            grid.innerHTML = '';
            
            currentProducts.forEach((product, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = 'item-box';
                itemElement.setAttribute('data-testid', 'item-cell');
                
                itemElement.innerHTML = `
                    <a href="/items/product_${index + 1}" style="text-decoration: none; color: inherit;">
                        <div class="item-image">å•†å“ç”»åƒ</div>
                        <div class="item-info">
                            <div class="item-name" data-testid="item-name">${product.name}</div>
                            <div class="item-price" data-testid="item-price">Â¥${product.price.toLocaleString()}</div>
                            <div class="item-status">${product.status}</div>
                        </div>
                    </a>
                `;
                
                grid.appendChild(itemElement);
            });
            
            updateDebugInfo();
        }
        
        // å•†å“ã‚¹ã‚­ãƒ£ãƒ³ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
        function simulateProductScan() {
            console.log('å•†å“ã‚¹ã‚­ãƒ£ãƒ³ã‚’é–‹å§‹...');
            
            // Chromeæ‹¡å¼µæ©Ÿèƒ½ã®content scriptãŒå­˜åœ¨ã™ã‚‹å ´åˆ
            if (typeof scanProducts === 'function') {
                scanProducts();
            } else {
                console.log('Chromeæ‹¡å¼µæ©Ÿèƒ½ã®content scriptãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“');
                alert('Chromeæ‹¡å¼µæ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã—ã¦ã‹ã‚‰ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„');
            }
        }
        
        // ãƒ©ãƒ³ãƒ€ãƒ å•†å“ã‚’è¿½åŠ 
        function addRandomProduct() {
            const randomNames = [
                'ãƒ©ãƒ³ãƒ€ãƒ å•†å“ A',
                'ãƒ†ã‚¹ãƒˆç”¨ã‚¢ã‚¤ãƒ†ãƒ  B',
                'ã‚µãƒ³ãƒ—ãƒ«å•†å“ C',
                'ãƒ‡ãƒ¢ç”¨å“ D',
                'ãƒ†ã‚¹ãƒˆå•†å“ E'
            ];
            
            const randomProduct = {
                name: randomNames[Math.floor(Math.random() * randomNames.length)] + ` #${Date.now()}`,
                price: Math.floor(Math.random() * 50000) + 1000,
                status: 'å‡ºå“ä¸­'
            };
            
            currentProducts.push(randomProduct);
            renderProducts();
        }
        
        // å•†å“ã‚’ã‚¯ãƒªã‚¢
        function clearProducts() {
            currentProducts = [];
            renderProducts();
        }
        
        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¡¨ç¤º
        function showDebugInfo() {
            const debugDiv = document.getElementById('debugInfo');
            const isVisible = debugDiv.style.display !== 'none';
            debugDiv.style.display = isVisible ? 'none' : 'block';
            
            if (!isVisible) {
                updateDebugInfo();
            }
        }
        
        // ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’æ›´æ–°
        function updateDebugInfo() {
            const debugContent = document.getElementById('debugContent');
            const productElements = document.querySelectorAll('[data-testid="item-cell"]');
            
            debugContent.innerHTML = `
                <p><strong>å•†å“æ•°:</strong> ${currentProducts.length}</p>
                <p><strong>DOMè¦ç´ æ•°:</strong> ${productElements.length}</p>
                <p><strong>æ‹¡å¼µæ©Ÿèƒ½ã®çŠ¶æ…‹:</strong> ${typeof chrome !== 'undefined' && chrome.runtime ? 'æœ‰åŠ¹' : 'ç„¡åŠ¹'}</p>
                <p><strong>Content Script:</strong> ${typeof scanProducts === 'function' ? 'èª­ã¿è¾¼ã¿æ¸ˆã¿' : 'æœªèª­ã¿è¾¼ã¿'}</p>
                <p><strong>ç¾åœ¨æ™‚åˆ»:</strong> ${new Date().toLocaleString()}</p>
                <hr>
                <p><strong>å•†å“ãƒªã‚¹ãƒˆ:</strong></p>
                <ul>
                    ${currentProducts.map((p, i) => `<li>${i + 1}. ${p.name} - Â¥${p.price.toLocaleString()}</li>`).join('')}
                </ul>
            `;
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', initializeProducts);
        
        // æ‹¡å¼µæ©Ÿèƒ½ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
        if (typeof chrome !== 'undefined' && chrome.runtime) {
            chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {
                console.log('ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡:', request);
                
                if (request.action === 'getProducts') {
                    sendResponse({ products: currentProducts });
                }
                
                return true;
            });
        }
        
        // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ãƒ˜ãƒ«ãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
        console.log(`
ğŸš€ ãƒ¡ãƒ«ã‚«ãƒªä¾¡æ ¼èª¿æ•´æ‹¡å¼µæ©Ÿèƒ½ - ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸
        
åˆ©ç”¨å¯èƒ½ãªé–¢æ•°:
- simulateProductScan() : å•†å“ã‚¹ã‚­ãƒ£ãƒ³ã‚’ãƒ†ã‚¹ãƒˆ
- addRandomProduct() : ãƒ©ãƒ³ãƒ€ãƒ å•†å“ã‚’è¿½åŠ 
- clearProducts() : å•†å“ã‚’ã‚¯ãƒªã‚¢
- showDebugInfo() : ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã®è¡¨ç¤º/éè¡¨ç¤º
        
Chromeæ‹¡å¼µæ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã—ã¦ã‹ã‚‰ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚
        `);
    </script>
</body>
</html>
